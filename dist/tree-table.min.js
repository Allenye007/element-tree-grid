!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.ELEMENT_TREE_COLUMN=t()}(this,function(){"use strict";var e=function(e,t){for(var n=-1,r=0;r<t.length;r++)if(t[r]==e){n=r;break}return n},t=function(t,n,r,a){for(var i=[],o=[t],d=-1;d!=o.length;)d=o.length,n.forEach(function(t){e(t[r],o)>-1&&e(t[a],o)==-1&&(i.push(t[a]),o.push(t[a]))});return i},n=function(){return Math.floor(Math.random()*Math.random()*Math.random()*Math.random()*1e3)},r=function(e,t){for(var n=0;t[n]&&(!t[n].$extra||t[n].$extra.hash!=e);)n++;return n},a={indexOf:e,descendantsIds:t,hash:n,index:r},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-table-column",{attrs:{prop:e.prop,label:e.label,width:e.width},scopedSlots:e._u([["default",function(t){return[e.hasChild(t.row)?n("span",{on:{click:function(n){n.preventDefault(),e.doexpanded(t.$index,t.row)}}},[n("span",{style:{paddingLeft:e.paddingLeft(t.row)}},[n("i",{class:e.icon(t.row)}),e._v(" "),n("i",{class:e.floderIcon(t.row),staticStyle:{"padding-right":"7px"}})]),n("span",[e._v(e._s(t.row[e.prop]))])]):e._e(),e.hasChild(t.row)?e._e():n("span",[n("span",{style:{paddingLeft:e.paddingLeft(t.row)}},[n("i",{class:e.fileIcon,staticStyle:{"padding-right":"7px","padding-left":"18px"}})]),n("span",[e._v(e._s(t.row[e.prop]))])])]}]])})},staticRenderFns:[],name:"el-table-tree-column",props:{prop:{type:String},label:{type:String},width:{type:String},treeKey:{type:String,default:"id"},childNumKey:{type:String,default:"child_num"},parentKey:{type:String,default:"parent_id"},levelKey:{type:String,default:"depth"},childKey:{type:String,default:"children"},fileIcon:{type:String,default:"el-icon-file"},folderIcon:{type:String,default:"el-icon-folder"},remote:{type:Function,default:null}},computed:{owner:function(){for(var e=this.$parent;e&&!e.tableId;)e=e.$parent;return e}},data:function(){return{loading:!1}},methods:{floderIcon:function(e){var t=e.$extra&&e.$extra.expanded,n=this.folderIcon,r=this.folderIcon+"-open";return t?r:n},hasChild:function(e){return void 0!=e[this.childNumKey]?e[this.childNumKey]>0:void 0!=e[this.childKey]&&e[this.childKey].length>0},paddingLeft:function(e){return 14*parseInt(e[this.levelKey])+"px"},icon:function(e){return e.$extra&&1==e.$extra.loading?"el-icon-loading":e.$extra&&e.$extra.expanded?"el-icon-caret-bottom":"el-icon-caret-right"},doexpanded:function(e,t){var n=this,r=JSON.parse(JSON.stringify(this.owner.store.states._data));if(void 0==r[e].$extra?r[e].$extra={expanded:!0}:r[e].$extra.expanded=!r[e].$extra.expanded,r[e].$extra.expanded)if(null!=this.remote){var i=a.hash();r[e].$extra.expanded=!1,r[e].$extra.hash=i,r[e].$extra.loading=!0,n.owner.store.commit("setData",r),this.remote(t,function(e){var t=n.owner.store.states._data,r=a.index(i,t);if(t[r].$extra={loading:!1,expanded:!!(e&&e.length>0)},e&&e.length>0){for(var o=t.slice(0,r+1),d=0;d<r+1;)t.shift(),d++;t=o.concat(e).concat(t)}else t[r][n.childNumKey]=0;n.owner.store.commit("setData",t)})}else{for(var o=r.slice(0,e+1),d=0;d<e+1;)r.shift(),d++;r=o.concat(t[n.childKey]).concat(r),this.owner.store.commit("setData",r)}else{var l=t[n.treeKey],s=[],c=a.descendantsIds(l,r,this.parentKey,this.treeKey);r.forEach(function(e){a.indexOf(e[n.treeKey],c)==-1&&s.push(e)}),r=s,this.owner.store.commit("setData",r)}}}};return"undefined"!=typeof window&&window.Vue&&Vue.component(i.name,i),i});