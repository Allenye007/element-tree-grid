!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.ELEMENT_TREE_COLUMN=t()}(this,function(){"use strict";var e=function(e,t){for(var n=-1,r=0;r<t.length;r++)if(t[r]==e){n=r;break}return n},t=function(t,n,r,o){for(var a=[],d=[t],i=-1;i!=d.length;)i=d.length,n.forEach(function(t){e(t[r],d)>-1&&e(t[o],d)==-1&&(a.push(t[o]),d.push(t[o]))});return a},n=function(){return Math.floor(Math.random()*Math.random()*Math.random()*Math.random()*1e3)},r=function(e,t){for(var n=0;t[n]&&(!t[n].$extra||t[n].$extra.hash!=e);)n++;return n},o=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},a={indexOf:e,descendantsIds:t,hash:n,index:r,extend:o},d={floderIcon:function(e,t){var n=!1;n=t.$extra?t.$extra.expanded:e.props.expandAll;var r=e.props.folderIcon,o=e.props.folderIcon+"-open";return n?o:r},hasChild:function(e,t){return void 0!=t[e.props.childNumKey]?t[e.props.childNumKey]>0:void 0!=t[e.props.childKey]&&t[e.props.childKey].length>0},paddingLeft:function(e,t){return 14*parseInt(t[e.props.levelKey])+"px"},icon:function(e){return e.$extra&&1==e.$extra.loading?"el-icon-loading":e.$extra&&e.$extra.expanded?"el-icon-caret-bottom":"el-icon-caret-right"},doexpanded:function(e,t,n,r){var o=e.store.table,d=t.props,i=JSON.parse(JSON.stringify(o.store.states._data));if(void 0==i[n].$extra?i[n].$extra={expanded:!0}:i[n].$extra.expanded=!i[n].$extra.expanded,i[n].$extra.expanded)if(null!=d.remote){var p=a.hash();i[n].$extra.expanded=!1,i[n].$extra.hash=p,i[n].$extra.loading=!0,o.store.commit("setData",i),d.remote(r,function(e){var t=o.store.states._data,n=a.index(p,t);if(t[n].$extra={loading:!1,expanded:!!(e&&e.length>0)},e&&e.length>0){for(var r=t.slice(0,n+1),i=0;i<n+1;)t.shift(),i++;t=r.concat(e).concat(t)}else t[n][d.childNumKey]=0;o.store.commit("setData",t)})}else{for(var l=i.slice(0,n+1),s=0;s<n+1;)i.shift(),s++;i=l.concat(r[d.childKey]).concat(i),o.store.commit("setData",i)}else{var c=r[d.treeKey],f=[],u=a.descendantsIds(c,i,d.parentKey,d.treeKey);i.forEach(function(e){a.indexOf(e[d.treeKey],u)==-1&&f.push(e)}),i=f,o.store.commit("setData",i)}}},i={functional:!0,name:"el-table-tree-column",props:{prop:{type:String},label:{type:String},width:{type:String},treeKey:{type:String,default:"id"},childNumKey:{type:String,default:"child_num"},parentKey:{type:String,default:"parent_id"},levelKey:{type:String,default:"depth"},childKey:{type:String,default:"children"},fileIcon:{type:String,default:"el-icon-file"},folderIcon:{type:String,default:"el-icon-folder"},remote:{type:Function,default:null},expandAll:{type:Boolean,default:!1}},render:function(e,t){var n=e,r=function(e){return n("span",{on:{click:function(n){n.preventDefault(),d.doexpanded(e,t,e.$index,e.row)}}},[n("span",{style:{paddingLeft:d.paddingLeft(t,e.row)}},[n("i",{class:d.icon(e.row)}),e._self._v(" "),n("i",{class:d.floderIcon(t,e.row),staticStyle:{"padding-right":"7px"}})]),n("span",{},e.row[t.props.prop])])},o=function(e){return n("span",[n("span",{style:{paddingLeft:d.paddingLeft(t,e.row)}},[n("i",{class:t.props.fileIcon,staticStyle:{"padding-right":"7px","padding-left":"18px"}})]),n("span",{},e.row[t.props.prop])])};return n("el-table-column",{attrs:{prop:t.props.prop,label:t.props.label,width:t.props.width},scopedSlots:{default:function(e){return d.hasChild(t,e.row)?[r(e)]:[o(e)]}}})}};return"undefined"!=typeof window&&window.Vue&&Vue.component(i.name,i),i});